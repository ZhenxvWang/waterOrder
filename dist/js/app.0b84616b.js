(function(e){function t(t){for(var n,i,s=t[0],l=t[1],d=t[2],u=0,f=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&f.push(r[i][0]),r[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);c&&c(t);while(f.length)f.shift()();return o.push.apply(o,d||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,s=1;s<a.length;s++){var l=a[s];0!==r[l]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},r={app:0},o=[];function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var c=l;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},"05b9":function(e,t,a){},"1a0a":function(e,t,a){},"31b5":function(e,t,a){"use strict";a("e468")},3648:function(e,t,a){"use strict";a("41c7")},"41c7":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},o=[],i=(a("034f"),a("2877")),s={},l=Object(i["a"])(s,r,o,!1,null,null,null),d=l.exports,c=a("8c4f"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"login_bg",attrs:{"element-loading-text":"Logging in, please wait!","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("div",{staticClass:"login_box"},[a("div",{staticClass:"title_img"}),a("el-form",{ref:"form",staticClass:"login_form",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"0"}},[a("el-form-item",{attrs:{prop:"adminname"}},[a("el-input",{attrs:{placeholder:"Please enter a user name"},model:{value:e.ruleForm.adminname,callback:function(t){e.$set(e.ruleForm,"adminname",t)},expression:"ruleForm.adminname"}},[a("i",{staticClass:"fa fa-user",attrs:{slot:"prefix"},slot:"prefix"})])],1),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{placeholder:"Please enter your password"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}},[a("i",{staticClass:"fa fa-lock",attrs:{slot:"prefix"},slot:"prefix"})])],1),a("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v("Login")])],1)],1)])},f=[],p=a("bc3a"),m=a.n(p),g={data:function(){return{loading:!1,ruleForm:{adminname:"admin",password:"123456"},rules:{adminname:[{required:!0,message:"Please enter a user name",trigger:"blur"},{min:3,max:10,message:"The length is 3 to 10 characters",trigger:"blur"}],password:[{required:!0,message:"Please enter your password",trigger:"blur"},{min:6,max:15,message:"The length is 6 to 15 characters",trigger:"blur"}]}}},methods:{login:function(){var e=this;this.loading=!0,m.a.post("/api/dincan/admin/checkAdmin",this.ruleForm).then((function(t){e.loading=!1,t.data?(e.$message.success("Login successful!"),window.sessionStorage.setItem("token",e.ruleForm.adminname),e.$router.push("/home")):e.$message.error("Login failed, please login again!")}))}}},h=g,b=(a("31b5"),Object(i["a"])(h,u,f,!1,null,"40d1436f",null)),v=b.exports,w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"home-container"},[a("el-header",[a("div",{staticClass:"left-logo"},[a("span",[e._v("Ordering background management system")])]),a("el-button",{attrs:{type:"danger"},on:{click:e.logout}},[e._v("exit")])],1),a("el-container",[a("el-aside",{attrs:{width:e.isCollapse?"64px":"200px"}},[a("el-menu",{attrs:{"background-color":"#333744","text-color":"#fff","active-text-color":"#409EFF","unique-opened":!0,collapse:e.isCollapse,"collapse-transition":!1,router:"","default-active":e.activePath}},e._l(e.menuList,(function(t){return a("el-submenu",{key:t.id,attrs:{index:t.id+""}},[a("template",{slot:"title"},[a("i",{class:e.icons[t.id]}),a("span",[e._v(e._s(t.name))])]),e._l(t.children,(function(t){return a("el-menu-item",{key:t.id,attrs:{index:"/"+t.path},on:{click:function(a){return e.savePath("/"+t.path)}}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-menu"}),a("span",[e._v(e._s(t.name))])])],2)}))],2)})),1)],1),a("el-main",[a("router-view")],1)],1)],1)},y=[],_={data:function(){return{menuList:[{name:"User management",id:11,children:[{name:"User list",id:111,path:"users"}]},{name:"Food management",id:13,children:[{name:"Food list",id:131,path:"food"}]},{name:"The order management",id:14,children:[{name:"The order list",id:141,path:"din"}]}],icons:{11:"el-icon-s-custom",13:"el-icon-potato-strips",14:"el-icon-s-order"},isCollapse:!1,activePath:"/users"}},created:function(){this.activePath=window.sessionStorage.getItem("savePath")},methods:{logout:function(){window.sessionStorage.clear(),this.$router.push("/login"),this.$message("You have logged out, please log in again!")},toggleCollapse:function(){this.isCollapse=!this.isCollapse},savePath:function(e){window.sessionStorage.setItem("savePath",e)}}},k=_,x=(a("a54e"),Object(i["a"])(k,w,y,!1,null,"d9b92f92",null)),F=x.exports,S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("Home page")]),a("el-breadcrumb-item",[e._v("User management")]),a("el-breadcrumb-item",[e._v("List of users")])],1),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{placeholder:"Please enter your name",clearable:""},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}})],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.getList}},[e._v("search")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.users,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{label:"user name",prop:"username"}}),a("el-table-column",{attrs:{label:"nickname",prop:"nike"}}),a("el-table-column",{attrs:{label:"phone",prop:"phone"}}),a("el-table-column",{attrs:{label:"account balance",prop:"acount"}}),a("el-table-column",{attrs:{label:"operation"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){return e.toEdit(t.row)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return e.userDelete(t.row.uid)}}})]}}])})],1),a("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[5,10],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"Modify the user",visible:e.editShow,width:"50%",center:""},on:{"update:visible":function(t){e.editShow=t},close:e.editClose}},[a("el-form",{ref:"editRules",attrs:{model:e.editUser,rules:e.editRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"nickname",prop:"nike"}},[a("el-input",{model:{value:e.editUser.nike,callback:function(t){e.$set(e.editUser,"nike",t)},expression:"editUser.nike"}})],1),a("el-form-item",{attrs:{label:"password",prop:"password"}},[a("el-input",{model:{value:e.editUser.password,callback:function(t){e.$set(e.editUser,"password",t)},expression:"editUser.password"}})],1),a("el-form-item",{attrs:{label:"phone",prop:"phone"}},[a("el-input",{model:{value:e.editUser.phone,callback:function(t){e.$set(e.editUser,"phone",t)},expression:"editUser.phone"}})],1),a("el-form-item",{attrs:{label:"account balance",prop:"acount"}},[a("el-input",{model:{value:e.editUser.acount,callback:function(t){e.$set(e.editUser,"acount",t)},expression:"editUser.acount"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.editClose()}}},[e._v("cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editCommit("editRules")}}},[e._v("Confirm the change")])],1)],1)],1)},$=[],q=a("1da1"),C=(a("96cf"),{data:function(){var e=function(e,t,a){var n=/^((0\d{2,3}-\d{7,8})|(1[3456789]\d{9}))$/;""==t?a(new Error("Please enter your mobile phone number")):n.test(t)?a():a(new Error("Please enter a valid mobile phone number"))},t=function(e,t,a){var n=/^\w{6,16}$/;""==t?a(new Error("Please enter your password")):n.test(t)?a():a(new Error("The password contains 6 to 16 digits and underscores (_)"))},a=function(e,t,a){var n=/^\w{4,16}$/;""==t?a(new Error("Please enter a user name")):n.test(t)?m.a.post("/api/ssm/user/checkUserRegist",{username:t}).then((function(e){e.data.flag?a(new Error("User name already exists!")):a()})):a(new Error("The user name contains 4 to 16 digits and underscores (_)"))};return{total:0,loading:!0,queryInfo:{query:"",pagenum:1,pageSize:5},users:[],editShow:!1,editUser:{uid:"",nike:"",phone:"",password:"",acount:""},editRules:{nike:[{required:!0,message:"Please enter a nickname",trigger:"blur"}],username:[{required:!0,validator:a,trigger:"blur"}],phone:[{required:!0,validator:e,trigger:"blur"}],password:[{required:!0,validator:t,trigger:"blur"}]}}},methods:{getList:function(){var e=this;m.a.post("/api/dincan/admin/getUsers",this.queryInfo).then((function(t){e.loading=!1,e.total=t.data.count,e.users=t.data.list}))},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getList()},toEdit:function(e){this.editUser.uid=e.uid,this.editUser.nike=e.nike,this.editUser.password=e.password,this.editUser.phone=e.phone,this.editUser.acount=e.acount,this.editShow=!0},editClose:function(){var e=this;this.editShow=!1,this.$nextTick((function(){e.$refs.editRules.resetFields()}))},editCommit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;m.a.post("/api/dincan/admin/updateUserBase",t.editUser).then((function(e){1==e.data?(t.$message.success("Modified successfully!"),t.getList()):t.$message.error("Modification failed!"),t.editShow=!1}))}))},userDelete:function(e){var t=this;return Object(q["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$confirm("This operation will permanently delete the user. Do you want to continue?","prompt",{confirmButtonText:"YES",cancelButtonText:"NO",type:"warning"}).catch((function(e){return e}));case 2:n=a.sent,"confirm"!=n?t.$message.info("Cancelled deletion!"):m.a.get("/api/dincan/admin/deleteUser?uid="+e).then((function(e){1==e.data?(t.$message.success("Deleted successfully!"),t.getList()):t.$message.error("Delete failed!")}));case 4:case"end":return a.stop()}}),a)})))()}},mounted:function(){this.getList()}}),O=C,I=(a("3648"),Object(i["a"])(O,S,$,!1,null,"171fde08",null)),U=I.exports,z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("首页")]),a("el-breadcrumb-item",[e._v("食品管理")]),a("el-breadcrumb-item",[e._v("食品列表")])],1),a("el-card",[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:6}},[a("el-input",{staticClass:"input-serch",attrs:{placeholder:"请输入食品名称"},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}})],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchGoods}},[e._v("搜索")])],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.toAdd}},[e._v("添加")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.foods,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{prop:"fname",label:"食品名称",align:"center"}}),a("el-table-column",{attrs:{prop:"fprice",label:"出售价格",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v("￥"+e._s(t.row.fprice.toFixed(2)))])]}}])}),a("el-table-column",{attrs:{prop:"ftime",label:"上架时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("timeflow")(t.row.ftime)))])]}}])}),a("el-table-column",{attrs:{prop:"tid",label:"食品类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.tid?a("div",[e._v("热门菜品")]):e._e(),2==t.row.tid?a("div",[e._v("特色菜品")]):e._e(),3==t.row.tid?a("div",[e._v("精品推荐")]):e._e(),4==t.row.tid?a("div",[e._v("香辣菜品")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){return e.toEdit(t.row)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return e.foodDelete(t.row.fid)}}})]}}])})],1),a("el-pagination",{attrs:{"current-page":e.queryInfo.pageIndex,"page-sizes":[5,10],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"修改商品",visible:e.editShow,width:"50%",center:""},on:{"update:visible":function(t){e.editShow=t},close:e.editClose}},[a("el-form",{ref:"editRules",attrs:{model:e.editFood,rules:e.editRules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"食品名称",prop:"fname"}},[a("el-input",{model:{value:e.editFood.fname,callback:function(t){e.$set(e.editFood,"fname",t)},expression:"editFood.fname"}})],1),a("el-form-item",{attrs:{label:"出售价格",prop:"fprice"}},[a("el-input",{attrs:{type:"number"},model:{value:e.editFood.fprice,callback:function(t){e.$set(e.editFood,"fprice",t)},expression:"editFood.fprice"}})],1),a("el-form-item",{attrs:{label:"食品类型",prop:"tid"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editFood.tid,callback:function(t){e.$set(e.editFood,"tid",t)},expression:"editFood.tid"}},e._l(e.options,(function(e){return a("el-option",{key:e.tid,attrs:{label:e.tname,value:e.tid}})})),1)],1),a("el-form-item",{attrs:{label:"食品描述",prop:"fdesc"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},model:{value:e.editFood.fdesc,callback:function(t){e.$set(e.editFood,"fdesc",t)},expression:"editFood.fdesc"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.editClose("editRules")}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editCommit("editRules")}}},[e._v("确认修改")])],1)],1)],1)},E=[];a("4de4");n["default"].filter("timeflow",(function(e){if(!e)return"";var t=new Date(e),a=t.getFullYear(),n=t.getMonth()+1,r=t.getDate();return a=n<10?a+"-0"+n:a+"-"+n,a=r<10?a+"-0"+r:a+"-"+r,a}));var P={data:function(){var e=function(e,t,a){""===t?a(new Error("请输入出售价格价格")):isNaN(parseFloat(t))?a(new Error("请输正确的数值")):a()};return{loading:!0,searchValue:"",foods:[],options:[],editFood:{fid:"",fname:"",fprice:"",fdesc:"",tid:""},editShow:!1,queryInfo:{query:"",pageIndex:1,pageSize:5},total:0,editRules:{fname:[{required:!0,message:"请输入食品名称",trigger:"blur"}],fprice:[{required:!0,validator:e,trigger:"blur"}],fdesc:[{required:!0,message:"请输入食品描述",trigger:"blur"}]}}},methods:{searchGoods:function(){this.getFoods()},toEdit:function(e){this.editFood.fid=e.fid,this.editFood.fname=e.fname,this.editFood.fprice=e.fprice,this.editFood.fdesc=e.fdesc,this.editFood.tid=e.tid,this.getFoodType(),this.editShow=!0},editClose:function(){var e=this;this.editShow=!1,this.$nextTick((function(){e.$refs.editRules.resetFields()}))},toAdd:function(){this.$router.push("/addfood")},checkGname:function(){this.editFood.fname},editCommit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;m.a.post("/api/dincan/admin/updateFoodBase",t.editFood).then((function(e){1==e.data?(t.$message.success("修改成功！"),t.getFoods()):t.$message.error("修改失败！"),t.editShow=!1}))}))},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getFoods()},handleCurrentChange:function(e){this.queryInfo.pageIndex=e,this.getFoods()},foodDelete:function(e){var t=this;return Object(q["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$confirm("此操作将永久删除该食品信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:n=a.sent,"confirm"!=n?t.$message.info("已取消删除！"):m.a.get("api/dincan/admin/deleteFood?fid="+e).then((function(e){1==e.data?(t.$message.success("删除成功！"),t.getFoods()):t.$message.error("删除失败！")}));case 4:case"end":return a.stop()}}),a)})))()},getFoodType:function(){var e=this;m.a.get("/api/dincan/admin/getTypes").then((function(t){e.options=t.data}))},getFoods:function(){var e=this;m.a.post("api/dincan/admin/getFoods",this.queryInfo).then((function(t){e.loading=!1,e.foods=t.data.list,e.total=t.data.count}))}},mounted:function(){this.getFoods()}},R=P,T=(a("ab4a"),Object(i["a"])(R,z,E,!1,null,"adb1d4a2",null)),j=T.exports,D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("首页")]),a("el-breadcrumb-item",[e._v("订单管理")]),a("el-breadcrumb-item",[e._v("订单列表")])],1),a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{placeholder:"请输入姓名",clearable:""},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}})],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.orders,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{label:"订单餐号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.wait)+" ")]}}])}),a("el-table-column",{attrs:{label:"购买人",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.user.nike)+" ")]}}])}),a("el-table-column",{attrs:{label:"购买人电话",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.user.phone)+" ")]}}])}),a("el-table-column",{attrs:{label:"订餐状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.wstate?a("el-tag",{attrs:{type:"warning"}},[e._v("备餐中")]):e._e(),1==t.row.wstate?a("el-tag",{attrs:{type:"danger"}},[e._v("待取餐")]):e._e(),2==t.row.wstate?a("el-tag",{attrs:{type:"success"}},[e._v("已完成")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"购买时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("timeflow")(t.row.otime))+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){return e.toEdit(t.row.wait,t.row.wstate)}}}),a("el-button",{attrs:{type:"warning",icon:"el-icon-tickets",circle:""},on:{click:function(a){return e.toOrderDetail(t.row.wait)}}})]}}])})],1),a("el-pagination",{attrs:{"current-page":e.queryInfo.pageIndex,"page-sizes":[5,10],"page-size":e.queryInfo.pageSize,layout:"total, sizes, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"修改订餐信息",visible:e.editOrderShow,width:"80%",center:""},on:{"update:visible":function(t){e.editOrderShow=t},close:function(t){e.editOrderShow=!1}}},[a("el-table",{attrs:{data:e.ors,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{label:"食品名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.card.food.fname)+" ")]}}])}),a("el-table-column",{attrs:{label:"购买份数",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.card.num)+" ")]}}])}),a("el-table-column",{attrs:{label:"订餐状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.wstate?a("el-tag",{attrs:{type:"warning"}},[e._v("备餐中")]):e._e(),1==t.row.wstate?a("el-tag",{attrs:{type:"danger"}},[e._v("待取餐")]):e._e(),2==t.row.wstate?a("el-tag",{attrs:{type:"success"}},[e._v("已完成")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"购买时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("timeflow")(t.row.otime))+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{on:{change:function(a){return e.changeItem(t.row)}},model:{value:t.row.wstate,callback:function(a){e.$set(t.row,"wstate",a)},expression:"scope.row.wstate"}},e._l(e.states,(function(e){return a("el-option",{key:e.ostate,attrs:{label:e.value,value:e.ostate}})})),1)]}}])})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-radio-group",{on:{change:function(t){return e.changes()}},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[a("el-radio",{attrs:{label:0}},[e._v("备餐中")]),a("el-radio",{attrs:{label:1}},[e._v("待取餐")]),a("el-radio",{attrs:{label:2}},[e._v("已完成")])],1)],1)],1),a("el-dialog",{attrs:{title:"订餐整体信息",visible:e.orderDetailShow,width:"80%",center:""},on:{"update:visible":function(t){e.orderDetailShow=t},close:function(t){e.orderDetailShow=!1}}},[a("el-table",{attrs:{data:e.ors,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{label:"食品名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.card.food.fname)+" ")]}}])}),a("el-table-column",{attrs:{label:"食品单价",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.card.food.fprice.toFixed(2))+" ")]}}])}),a("el-table-column",{attrs:{label:"购买份数",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.card.num)+" ")]}}])}),a("el-table-column",{attrs:{label:"总价",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.card.tprice.toFixed(2))+" ")]}}])}),a("el-table-column",{attrs:{label:"订餐状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.wstate?a("el-tag",{attrs:{type:"warning"}},[e._v("备餐中")]):e._e(),1==t.row.wstate?a("el-tag",{attrs:{type:"danger"}},[e._v("待取餐")]):e._e(),2==t.row.wstate?a("el-tag",{attrs:{type:"success"}},[e._v("已完成")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"购买人称呼",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.user.nike)+" ")]}}])}),a("el-table-column",{attrs:{label:"购买人电话",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.user.phone)+" ")]}}])}),a("el-table-column",{attrs:{label:"购买时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("timeflow")(t.row.otime))+" ")]}}])})],1)],1)],1)},L=[];n["default"].filter("timeflow",(function(e){if(!e)return"";var t=new Date(e),a=t.getFullYear(),n=t.getMonth()+1,r=t.getDate();return a=n<10?a+"-0"+n:a+"-"+n,a=r<10?a+"-0"+r:a+"-"+r,a}));var M={data:function(){return{loading:!1,orders:[],ors:[],total:0,radio:0,orderWait:"",editOrderShow:!1,orderDetailShow:!1,checkedState:"",editOrderInfo:{ostate:""},states:[{ostate:"0",value:"备餐中"},{ostate:"1",value:"待取餐"},{ostate:"2",value:"已完成"}],queryInfo:{query:"",pageIndex:1,pageSize:5}}},methods:{getOrders:function(){var e=this;m.a.post("/api/dincan/admin/getOrdersPa",this.queryInfo).then((function(t){e.orders=t.data.list,e.total=t.data.count}))},handleSizeChange:function(e){this.queryInfo.pageSize=e,this.getOrders()},handleCurrentChange:function(e){this.queryInfo.pageIndex=e,this.getOrders()},search:function(){this.getOrders()},toEdit:function(e,t){var a=this;m.a.get("/api/dincan/admin/getOrders?wait="+e).then((function(n){a.orderWait=e,a.radio=parseInt(t),a.ors=n.data,a.editOrderShow=!0}))},changeItem:function(e){var t=this;m.a.get("/api/dincan/admin/updateOrder?oid="+e.oid+"&wstate="+e.wstate).then((function(e){1==e.data?t.getOrders():t.$message.error("修改失败，请重新尝试！")}))},changes:function(){var e=this;console.log(this.orderWait,this.radio),m.a.get("/api/dincan/admin/updateOrders?wait="+this.orderWait+"&wstate="+this.radio).then((function(t){t.data>0?(e.getOrders(),e.editOrderShow=!1):e.$message.error("修改失败，请重新尝试！")}))},toOrderDetail:function(e){var t=this;m.a.get("/api/dincan/admin/getOrders?wait="+e).then((function(e){t.ors=e.data,t.orderDetailShow=!0}))}},mounted:function(){this.getOrders()}},N=M,B=Object(i["a"])(N,D,L,!1,null,"e8496362",null),W=B.exports,Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("首页")]),a("el-breadcrumb-item",[e._v("商品管理")]),a("el-breadcrumb-item",[e._v("商品添加")])],1),a("el-card",[a("el-button",{attrs:{type:"primary"},on:{click:e.toShop}},[e._v("返回商品列表")]),a("el-form",{ref:"addRules",attrs:{model:e.addFood,rules:e.addRules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"食品名称",prop:"fname"}},[a("el-input",{model:{value:e.addFood.fname,callback:function(t){e.$set(e.addFood,"fname",t)},expression:"addFood.fname"}})],1),a("el-form-item",{attrs:{label:"出售价格",prop:"fprice"}},[a("el-input",{attrs:{type:"number"},model:{value:e.addFood.fprice,callback:function(t){e.$set(e.addFood,"fprice",t)},expression:"addFood.fprice"}})],1),a("el-form-item",{attrs:{label:"食品描述",prop:"fdesc"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},model:{value:e.addFood.fdesc,callback:function(t){e.$set(e.addFood,"fdesc",t)},expression:"addFood.fdesc"}})],1),a("el-form-item",{attrs:{label:"食品类型",prop:"tid"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addFood.tid,callback:function(t){e.$set(e.addFood,"tid",t)},expression:"addFood.tid"}},e._l(e.options,(function(e){return a("el-option",{key:e.tid,attrs:{label:e.tname,value:e.tid}})})),1)],1),a("el-form-item",{attrs:{label:"商品图片"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"/api/dincan/admin/uploadImg","on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-success":e.successUpload,"on-error":e.errorUpload,"file-list":e.fileList,multiple:!1,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),a("el-form-item",{attrs:{label:"  "}},[a("el-button",{attrs:{type:"primary"},on:{click:e.onFood}},[e._v("添加食品")])],1)],1)],1)],1)},A=[],G={data:function(){var e=function(e,t,a){""===t?a(new Error("请输入市场价格")):isNaN(parseFloat(t))?a(new Error("请输正确的数值")):a()};return{addFood:{fname:"",fprice:"",tid:"",fdesc:"",fpicture:""},fileList:[],options:[],addRules:{fname:[{required:!0,message:"请输入商品名称",trigger:"blur"}],fprice:[{required:!0,validator:e,trigger:"blur"}],fdesc:[{required:!0,message:"请输入商品数量",trigger:"blur"}]}}},methods:{toShop:function(){this.$router.push("/food")},getFoodType:function(){var e=this;m.a.get("/api/dincan/admin/getTypes").then((function(t){e.options=t.data}))},handlePreview:function(e,t){},handleRemove:function(e,t){var a=this;m.a.get("/api/dincan/admin/deleteUpload?img="+this.addFood.fpicture).then((function(e){a.$message.success("移除成功！")}))},successUpload:function(e,t,a){e.flag&&(this.addFood.fpicture=e.img,this.$message.success("添加成功！"))},errorUpload:function(e,t,a){this.$message.console.error("添加失败！")},onFood:function(){var e=this;""!=this.addFood.fname&&null!=this.addFood.fprice&&""!=this.addFood.fdesc?""!=this.addFood.tid?""!=this.addFood.fpicture?m.a.post("/api/dincan/admin/addFood",this.addFood).then((function(t){1==t.data?(e.$message.success("添加成功！"),e.$router.push("/food")):e.$message.error("添加失败！")})):this.$message("请上传食品图片"):this.$message("请选择类型"):this.$message("完善食品基本信息")}},mounted:function(){this.getFoodType()}},J=G,H=(a("f531"),Object(i["a"])(J,Y,A,!1,null,"dbdaa762",null)),V=H.exports;n["default"].use(c["a"]);var K=[{path:"/",redirect:"/login"},{path:"/login",component:v},{path:"/home",component:F,redirect:"/din",children:[{path:"/users",component:U},{path:"/food",component:j},{path:"/addfood",component:V},{path:"/din",component:W}]}],Q=new c["a"]({routes:K});Q.beforeEach((function(e,t,a){if("/login"===e.path)return a();var n=window.sessionStorage.getItem("token");if(!n)return a("/login");a()}));var X=Q,Z=a("2f62");n["default"].use(Z["a"]);var ee=new Z["a"].Store({state:{},mutations:{},actions:{},modules:{}}),te=(a("aede"),a("1a0a"),a("5c96")),ae=a.n(te);a("0fae");n["default"].use(ae.a),n["default"].config.productionTip=!1,new n["default"]({router:X,store:ee,render:function(e){return e(d)}}).$mount("#app")},"6ea0":function(e,t,a){},"85ec":function(e,t,a){},a54e:function(e,t,a){"use strict";a("dd08")},ab4a:function(e,t,a){"use strict";a("05b9")},aede:function(e,t,a){},dd08:function(e,t,a){},e468:function(e,t,a){},f531:function(e,t,a){"use strict";a("6ea0")}});
//# sourceMappingURL=app.0b84616b.js.map