{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\玻璃密封罐\\Java web的前后端分离的在线订餐系统\\Java web的前后端分离的在线订餐系统\\first_demo\\first_demo\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\玻璃密封罐\\Java web的前后端分离的在线订餐系统\\Java web的前后端分离的在线订餐系统\\first_demo\\first_demo\\src\\components\\food\\AddFood.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\玻璃密封罐\\Java web的前后端分离的在线订餐系统\\Java web的前后端分离的在线订餐系统\\first_demo\\first_demo\\src\\components\\food\\AddFood.vue","mtime":1647264812956},{"path":"C:\\Users\\Administrator\\Desktop\\玻璃密封罐\\Java web的前后端分离的在线订餐系统\\Java web的前后端分离的在线订餐系统\\first_demo\\first_demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\玻璃密封罐\\Java web的前后端分离的在线订餐系统\\Java web的前后端分离的在线订餐系统\\first_demo\\first_demo\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Administrator\\Desktop\\玻璃密封罐\\Java web的前后端分离的在线订餐系统\\Java web的前后端分离的在线订餐系统\\first_demo\\first_demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Administrator\\Desktop\\玻璃密封罐\\Java web的前后端分离的在线订餐系统\\Java web的前后端分离的在线订餐系统\\first_demo\\first_demo\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOw0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhKCkgew0KICAgICB2YXIgdmFsaU51bWJlclBhc3MxID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gey8v5q2j5pW05pWwDQogICAgICAgICAgICBpZiAodmFsdWUgPT09ICcnKSB7DQogICAgICAgICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCdQbGVhc2UgZW50ZXIgbWFya2V0IHByaWNlJykpOw0KICAgICAgICAgICAgfSBlbHNlIGlmIChpc05hTihwYXJzZUZsb2F0KHZhbHVlKSkpIHsNCiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ1BsZWFzZSBlbnRlciB0aGUgY29ycmVjdCB2YWx1ZScpKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgY2FsbGJhY2soKTsNCiAgICAgICAgICAgIH0NCiAgICAgfTsNCiAgICByZXR1cm4gew0KICAgICBhZGRGb29kOnsNCiAgICAgICBmbmFtZTonJywNCiAgICAgICBmcHJpY2U6JycsDQogICAgICAgdGlkOicnLA0KICAgICAgIGZkZXNjOicnLA0KICAgICAgIGZwaWN0dXJlOicnDQogICAgIH0sDQogICAgIGZpbGVMaXN0OltdLA0KICAgICBvcHRpb25zOltdLA0KICAgICBhZGRSdWxlczp7DQogICAgICAgIGZuYW1lOlt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAnUGxlYXNlIGVudGVyIHRoZSBuYW1lIG9mIHRoZSBwcm9kdWN0JywgdHJpZ2dlcjogJ2JsdXInIH1dLA0KICAgICAgICBmcHJpY2U6W3sgcmVxdWlyZWQ6IHRydWUsIHZhbGlkYXRvcjp2YWxpTnVtYmVyUGFzczEsIHRyaWdnZXI6ICJibHVyIiB9XSwNCiAgICAgICAgZmRlc2M6W3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICdQbGVhc2UgZW50ZXIgdGhlIHF1YW50aXR5IG9mIGdvb2RzJywgdHJpZ2dlcjogJ2JsdXInfV0sDQogICAgIH0sDQoNCg0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIHRvU2hvcCgpew0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9mb29kJyk7DQogICAgfSwNCiAgICAvL+iOt+WPluaJgOaciemjn+WTgeexu+Weiw0KICAgIGdldEZvb2RUeXBlKCl7DQogICAgICBheGlvcy5nZXQoJy9hcGkvb3JkZXIvYWRtaW4vZ2V0VHlwZXMnKS50aGVuKHJlcz0+eyAgDQogICAgICAgICAgdGhpcy5vcHRpb25zID0gcmVzLmRhdGE7DQogICAgICB9KQ0KICAgIH0sDQogICAgIGhhbmRsZVByZXZpZXcoZmlsZSwgZmlsZUxpc3Qpew0KICAgICAgIA0KICAgICB9LA0KICAgICBoYW5kbGVSZW1vdmUoZmlsZSwgZmlsZUxpc3Qpew0KICAgICAgIGF4aW9zLmdldCgnL2FwaS9vcmRlci9hZG1pbi9kZWxldGVVcGxvYWQ/aW1nPScrdGhpcy5hZGRGb29kLmZwaWN0dXJlKS50aGVuKHJlcz0+ew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcygnUmVtb3ZhbCBzdWNjZXNzZnVsIScpOw0KICAgICAgIH0pDQogICAgIH0sIA0KICAgICBzdWNjZXNzVXBsb2FkKHJlc3BvbnNlLCBmaWxlLCBmaWxlTGlzdCl7DQogICAgICBpZihyZXNwb25zZS5mbGFnKXsNCiAgICAgICAgdGhpcy5hZGRGb29kLmZwaWN0dXJlID0gcmVzcG9uc2UuaW1nOw0KICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ0FkZGVkIHN1Y2Nlc3NmdWxseSEnKTsNCiAgICAgIH0NCiAgICAgfSwNCiAgICAgZXJyb3JVcGxvYWQoZXJyLCBmaWxlLCBmaWxlTGlzdCl7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UuY29uc29sZS5lcnJvcignQWRkIGZhaWxlZCEnKTsNCiAgICAgfSwNCiAgICAgb25Gb29kKCl7DQogICAgICAgaWYodGhpcy5hZGRGb29kLmZuYW1lIT0nJyYmdGhpcy5hZGRGb29kLmZwcmljZSE9bnVsbCYmdGhpcy5hZGRGb29kLmZkZXNjIT0nJyl7DQogICAgICAgICBpZih0aGlzLmFkZEZvb2QudGlkIT0nJyl7DQogICAgICAgICAgaWYodGhpcy5hZGRGb29kLmZwaWN0dXJlIT0nJyl7DQogICAgICAgICAgICBheGlvcy5wb3N0KCcvYXBpL29yZGVyL2FkbWluL2FkZEZvb2QnLHRoaXMuYWRkRm9vZCkudGhlbihyZXM9PnsNCiAgICAgICAgICAgICAgaWYocmVzLmRhdGE9PTEpew0KICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcygiQWRkZWQgc3VjY2Vzc2Z1bGx5ISIpOw0KICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvZm9vZCcpOw0KICAgICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCJBZGQgZmFpbGVkISIpDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pDQogICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKCJQbGVhc2UgdXBsb2FkIHBpY3R1cmVzIG9mIGZvb2QiKTsNCiAgICAgICAgICB9DQogICAgICAgIH1lbHNlew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoIlBsZWFzZSBzZWxlY3QgYSB0eXBlIik7DQogICAgICAgIH0NCiAgICAgICB9ZWxzZXsNCiAgICAgICAgIHRoaXMuJG1lc3NhZ2UoIkltcHJvdmUgYmFzaWMgZm9vZCBpbmZvcm1hdGlvbiIpOw0KICAgICAgIH0NCiAgICAgfQ0KICB9LA0KICBtb3VudGVkKCl7DQogICAgdGhpcy5nZXRGb29kVHlwZSgpOw0KICB9DQp9DQo="},{"version":3,"sources":["AddFood.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddFood.vue","sourceRoot":"src/components/food","sourcesContent":["<template>\r\n  <div>\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item>Index</el-breadcrumb-item>\r\n      <el-breadcrumb-item>Commodity management</el-breadcrumb-item>\r\n      <el-breadcrumb-item>Commodity add</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <el-card>\r\n      <el-button type=\"primary\" @click=\"toShop\">Return to the list of items</el-button>\r\n      <el-form :model=\"addFood\" :rules=\"addRules\" ref=\"addRules\" label-width=\"150px\">\r\n        <el-form-item label=\"The name of the food\" prop=\"fname\">\r\n          <el-input v-model=\"addFood.fname\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"Sale price\" prop=\"fprice\">\r\n          <el-input type=\"number\" v-model=\"addFood.fprice\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"Food description\" prop=\"fdesc\">\r\n            <el-input\r\n            type=\"textarea\"\r\n            :autosize=\"{ minRows: 2, maxRows: 4}\"\r\n            placeholder=\"Please enter the content\"\r\n            v-model=\"addFood.fdesc\">\r\n          </el-input>\r\n        </el-form-item>\r\n         <el-form-item label=\"Food type\" prop=\"tid\">\r\n          <el-select v-model=\"addFood.tid\" placeholder=\"Please select\">\r\n            <el-option\r\n              v-for=\"item in options\"\r\n              :key=\"item.tid\"\r\n              :label=\"item.tname\"\r\n              :value=\"item.tid\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"Commodity images\">\r\n          <el-upload\r\n            class=\"upload-demo\"\r\n            action=\"/api/order/admin/uploadImg\"\r\n            :on-preview=\"handlePreview\"\r\n            :on-remove=\"handleRemove\"\r\n            :on-success=\"successUpload\"\r\n            :on-error=\"errorUpload\"\r\n            :file-list=\"fileList\"\r\n            :multiple=\"false\"\r\n            list-type=\"picture\">\r\n            <el-button size=\"small\" type=\"primary\">Click on the upload</el-button>\r\n            <div slot=\"tip\" class=\"el-upload__tip\">Only JPG/PNG files can be uploaded, and the maximum size is 500kb</div>\r\n          </el-upload>\r\n        </el-form-item>\r\n        <el-form-item label=\"  \">\r\n           <el-button type=\"primary\" @click=\"onFood\">Add food</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n      \r\n    </el-card>\r\n  </div>\r\n</template>\r\n<script>\r\nimport axios from 'axios';\r\nexport default {\r\n  data() {\r\n     var valiNumberPass1 = (rule, value, callback) => {//正整数\r\n            if (value === '') {\r\n                callback(new Error('Please enter market price'));\r\n            } else if (isNaN(parseFloat(value))) {\r\n                callback(new Error('Please enter the correct value'));\r\n            } else {\r\n                callback();\r\n            }\r\n     };\r\n    return {\r\n     addFood:{\r\n       fname:'',\r\n       fprice:'',\r\n       tid:'',\r\n       fdesc:'',\r\n       fpicture:''\r\n     },\r\n     fileList:[],\r\n     options:[],\r\n     addRules:{\r\n        fname:[{ required: true, message: 'Please enter the name of the product', trigger: 'blur' }],\r\n        fprice:[{ required: true, validator:valiNumberPass1, trigger: \"blur\" }],\r\n        fdesc:[{ required: true, message: 'Please enter the quantity of goods', trigger: 'blur'}],\r\n     },\r\n\r\n\r\n    }\r\n  },\r\n  methods: {\r\n    toShop(){\r\n      this.$router.push('/food');\r\n    },\r\n    //获取所有食品类型\r\n    getFoodType(){\r\n      axios.get('/api/order/admin/getTypes').then(res=>{  \r\n          this.options = res.data;\r\n      })\r\n    },\r\n     handlePreview(file, fileList){\r\n       \r\n     },\r\n     handleRemove(file, fileList){\r\n       axios.get('/api/order/admin/deleteUpload?img='+this.addFood.fpicture).then(res=>{\r\n          this.$message.success('Removal successful!');\r\n       })\r\n     }, \r\n     successUpload(response, file, fileList){\r\n      if(response.flag){\r\n        this.addFood.fpicture = response.img;\r\n        this.$message.success('Added successfully!');\r\n      }\r\n     },\r\n     errorUpload(err, file, fileList){\r\n        this.$message.console.error('Add failed!');\r\n     },\r\n     onFood(){\r\n       if(this.addFood.fname!=''&&this.addFood.fprice!=null&&this.addFood.fdesc!=''){\r\n         if(this.addFood.tid!=''){\r\n          if(this.addFood.fpicture!=''){\r\n            axios.post('/api/order/admin/addFood',this.addFood).then(res=>{\r\n              if(res.data==1){\r\n                this.$message.success(\"Added successfully!\");\r\n                this.$router.push('/food');\r\n              }else{\r\n                this.$message.error(\"Add failed!\")\r\n              }\r\n            })\r\n          }else{\r\n            this.$message(\"Please upload pictures of food\");\r\n          }\r\n        }else{\r\n          this.$message(\"Please select a type\");\r\n        }\r\n       }else{\r\n         this.$message(\"Improve basic food information\");\r\n       }\r\n     }\r\n  },\r\n  mounted(){\r\n    this.getFoodType();\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.el-steps {\r\n  margin: 15px 0;\r\n  padding: 5px;\r\n}\r\n.el-step__title {\r\n  font-size: 12px;\r\n}\r\n.el-tab-pane {\r\n  border-bottom: black;\r\n}\r\n.el-form{\r\n  width: 60%;\r\n  margin-top: 20px;\r\n  // /* border: 1px solid red; */\r\n  // margin: 5px auto;\r\n  // .el-form-item{\r\n  //   margin: 50px 0px;\r\n  // }\r\n}\r\n</style>"]}]}